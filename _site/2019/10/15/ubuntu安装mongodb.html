<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubuntu18.04安装Mongodb - 孙佳磊的博客</title>
    <meta name="author"  content="孙佳磊">
    <meta name="description" content="Ubuntu18.04安装Mongodb">
    <meta name="keywords"  content="ubuntu">
    <!-- Open Graph -->
    <meta property="og:title" content="Ubuntu18.04安装Mongodb - 孙佳磊的博客">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://localhost:4000/2019/10/15/ubuntu%E5%AE%89%E8%A3%85mongodb.html">
    <meta property="og:description" content="一位PHP开发对技术的一点分享。">
    <meta property="og:site_name" content="孙佳磊的博客">
    <link rel="stylesheet" href="//cdn.staticfile.org/normalize/6.0.0/normalize.min.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_roc50gemkxpw4s4i.css">
    <link rel="stylesheet" href="/assets/css/github-markdown.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <link rel="stylesheet" href="/assets/css/share.min.css">
    <link rel="stylesheet" href="/assets/css/app.min.css">
    <link rel="stylesheet" href="/assets/css/common.css">
</head>
<body>
    <!--[if lt IE 10]>
<div class="alert-danger" role="alert">你的浏览器实在太太太旧了，放学别走，升级完浏览器再说！<a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div>
<![endif]-->
<input id="nm-switch" type="hidden" value="false">

<header class="g-header">
    <div class="g-logo">
      <a href="/"></a>
    </div>
    <i id="menu-toggle" class="iconfont icon-menu"></i>
    <nav class="g-nav">
        <ul>
            
            <li><a href="/">Home</a></li>
            
            <li><a href="/tags.html">Tags</a></li>
            
        </ul>
    </nav>
</header>


<header class="g-banner post-header post-pattern-circuitBoard bgcolor-default post-no-cover" data-theme="default">
    <div class="post-wrapper">
        <div class="post-tags">
            
            
            <a href="http://localhost:4000/tags.html#ubuntu" class="post-tag">ubuntu</a>
            
            
        </div>
        <h1>Ubuntu18.04安装Mongodb</h1>
        <div class="post-meta">
            <span class="post-meta-item"><i class="iconfont icon-author"></i><a href="http://localhost:4000" target="_blank" rel="author">sunjialei</a></></span>
            <time class="post-meta-item" datetime="2019-10-15"><i class="iconfont icon-date"></i>2019-10-15</time>
        </div>
    </div>
    
</header>

<div class="post-content">
    
    <article class="markdown-body">
        <div class="post-forward-message">本文章地址：http://localhost:4000/2019/10/15/ubuntu%E5%AE%89%E8%A3%85mongodb.html 转载请注明出处</div>
        <p>安装步骤如下:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">ubuntu</span><span class="k">@VM-0-3-ubuntu</span><span class="p">:</span><span class="err">~$</span> <span class="n">wget</span> <span class="n">https</span><span class="p">://</span><span class="n">repo</span><span class="p">.</span><span class="n">mongodb</span><span class="p">.</span><span class="n">org</span><span class="p">/</span><span class="n">apt</span><span class="p">/</span><span class="n">ubuntu</span><span class="p">/</span><span class="n">dists</span><span class="p">/</span><span class="n">bionic</span><span class="p">/</span><span class="n">mongodb-org</span><span class="p">/</span><span class="m">4.0</span><span class="p">/</span><span class="n">multiverse</span><span class="p">/</span><span class="n">binary-amd64</span><span class="p">/</span><span class="n">mongodb-org-server_4</span><span class="m">.0.10</span><span class="n">_amd64</span><span class="p">.</span><span class="n">deb</span>

<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:</span><span class="err">~$</span> <span class="n">ar</span> <span class="n">-vx</span> <span class="n">mongodb-org-server_4</span><span class="m">.0.10</span><span class="n">_amd64</span><span class="p">.</span><span class="n">deb</span>
</code></pre></div></div>
<p>后生成如下三个文件：x - debian-binary x - control.tar.xz x - data.tar.xz</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">ubuntu</span><span class="k">@VM-0-3-ubuntu</span><span class="p">:</span><span class="err">~$</span> <span class="n">sudo</span> <span class="n">mkdir</span> <span class="p">/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span>
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:</span><span class="err">~$</span> <span class="n">sudo</span> <span class="n">cp</span> <span class="n">data</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">xz</span> <span class="p">/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="p">/</span>
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">xz</span> <span class="n">-d</span> <span class="n">data</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">xz</span> <span class="p">(</span><span class="err">会变为一个</span><span class="n">data</span><span class="p">.</span><span class="n">tar</span><span class="err">压缩包</span><span class="p">)</span>
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">tar</span> <span class="n">-xvf</span> <span class="n">data</span><span class="p">.</span><span class="n">tar</span>

<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">mongodb-server-core</span> 
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">mongodb-clients</span>
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">mkdir</span> <span class="n">data</span>
<span class="n">ubuntu</span><span class="err">@</span><span class="n">VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">mkdir</span> <span class="n">logs</span>
</code></pre></div></div>

<p>配置文件</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">ubuntu</span><span class="k">@VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">vim</span> <span class="n">mongod</span><span class="p">.</span><span class="n">conf</span>
</code></pre></div></div>

<p>填写配置</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">dbpath</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">mongodb</span><span class="o">/</span><span class="nt">data</span>
<span class="nt">logpath</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">mongodb</span><span class="o">/</span><span class="nt">logs</span><span class="o">/</span><span class="nt">mongod</span><span class="nc">.log</span>
<span class="nt">logappend</span><span class="o">=</span><span class="nt">true</span>
<span class="nt">fork</span><span class="o">=</span><span class="nt">true</span>
<span class="nt">port</span><span class="o">=</span><span class="nt">27017</span>
<span class="nt">bind_ip</span><span class="o">=</span><span class="nt">0</span><span class="nc">.0.0.0</span>
<span class="err">#</span> <span class="err">需要认证</span>
<span class="nf">#auth</span><span class="o">=</span><span class="nt">true</span>
</code></pre></div></div>

<p>后台启动</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">ubuntu</span><span class="k">@VM-0-3-ubuntu</span><span class="p">:/</span><span class="n">usr</span><span class="p">/</span><span class="n">local</span><span class="p">/</span><span class="n">mongodb</span><span class="err">$</span> <span class="n">sudo</span> <span class="n">usr</span><span class="p">/</span><span class="n">bin</span><span class="p">/</span><span class="n">mongod</span> <span class="n">-f</span> <span class="n">mongod</span><span class="p">.</span><span class="n">conf</span>
</code></pre></div></div>

<p>设置用户密码</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">use</span> <span class="nt">admin</span>
<span class="nt">db</span><span class="nc">.createUser</span><span class="o">(</span><span class="p">{</span><span class="py">user</span><span class="p">:</span><span class="s1">"root"</span><span class="p">,</span> <span class="n">pwd</span><span class="p">:</span><span class="s1">"password*"</span><span class="p">,</span> <span class="n">roles</span><span class="p">:[</span><span class="err">{</span><span class="n">role</span><span class="p">:</span><span class="s2">'root'</span><span class="p">,</span> <span class="s2">'db'</span><span class="p">:</span> <span class="s2">'admin'</span><span class="p">}</span><span class="o">],</span> <span class="nt">mechanisms</span><span class="o">:</span> <span class="o">[</span><span class="s1">"SCRAM-SHA-1"</span><span class="o">]</span><span class="err">}</span><span class="o">)</span>
<span class="err">配置文件开启认证：</span><span class="nt">auth</span><span class="o">=</span><span class="nt">true</span>
<span class="err">重启</span><span class="nt">mongodb</span>
</code></pre></div></div>

<p>验证用户密码</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">use</span> <span class="nt">admin</span>
<span class="nt">db</span><span class="nc">.auth</span><span class="o">(</span><span class="s2">'root'</span><span class="o">,</span> <span class="s2">'password'</span><span class="o">)</span>

<span class="nt">use</span> <span class="nt">blog</span>
<span class="nt">db</span><span class="nc">.createUser</span><span class="o">(</span><span class="p">{</span><span class="py">user</span><span class="p">:</span><span class="s1">"blog"</span><span class="p">,</span> <span class="n">pwd</span><span class="p">:</span><span class="s1">"xxx"</span><span class="p">,</span> <span class="n">roles</span><span class="p">:[</span><span class="err">{</span><span class="n">role</span><span class="p">:</span><span class="s2">'dbOwner'</span><span class="p">,</span> <span class="s2">'db'</span><span class="p">:</span> <span class="s2">'blog'</span><span class="p">}</span><span class="o">],</span> <span class="nt">mechanisms</span><span class="o">:</span> <span class="o">[</span><span class="s1">"SCRAM-SHA-1"</span><span class="o">]</span><span class="err">}</span><span class="o">)</span>
</code></pre></div></div>

<p>接下来可以用可视化工具来连接mongodb了</p>


    </article>
    
    <div class="social-share-wrapper">
        <div class="social-share"></div>
    </div>
    
</div>

<section class="author-detail">
    <section class="post-footer-item author-card">
        <div class="avatar">
            <img src="/assets/img/profile.jpg" alt="">
        </div>
        <div class="author-name" rel="author">孙佳磊</div>
        <div class="bio">
            <p>WEB开发者,热爱技术</p>
        </div>
        
        <ul class="sns-links">
            
            <li>
                <a href="//github.com/cainiaosunjialei" target="_blank">
                    <i class="iconfont icon-github"></i>
                </a>
            </li>
            
        </ul>
        
    </section>
    <section class="post-footer-item read-next">
        
        
        <div class="read-next-item">
            <a href="/2019/10/15/css-margin-top%E4%B8%8D%E7%94%9F%E6%95%88.html" class="read-next-link"></a>
            <section>
                <span>CSS子div的margin-top属性不生效的解决办法</span>
                <p>原因:如果父div元素没有垂直padding和boder，子元素的垂直margin就会与父元素叠加，也就是说，表现...</p>
            </section>
            
        </div>
        
    </section>
    
</section>

<footer class="g-footer">
    <section>孙佳磊的博客 © 2019</section>
    <section>Powered by <a href="//jekyllrb.com">Jekyll</a> | <a href="https://github.com/kaeyleo/jekyll-theme-H2O">Theme H2O</a></section>
</footer>

<script src="/assets/js/social-share.min.js"></script>
<script>
    socialShare('.social-share', {
        sites: ['wechat','weibo','douban','twitter'],
        wechatQrcodeTitle: "分享到微信朋友圈",
        wechatQrcodeHelper: '<p>扫码后点击右上角</p><p>将本文分享至朋友圈</p>'
    });
</script>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
//var d = document, s = d.createElement('script');
/*写入自己的disqus信息*/
//s.src = 'https://liaokeyu.disqus.com/embed.js';
//s.setAttribute('data-timestamp', +new Date());
//(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/prism.js"></script>
<script src="/assets/js/index.min.js"></script>
</body>
</html>
